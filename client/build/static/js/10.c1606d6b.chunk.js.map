{"version":3,"sources":["containers/business/settings/opening-hours/opening-hours.module.scss","containers/business/settings/opening-hours/opening-hours.settings.tsx"],"names":["module","exports","connect","state","schedule","getSchedule","error","getError","dispatch","postEmployeeHours","form","postEmployeeSchedule","props","useState","Flag","setFlag","Hours","setHours","useEffect","setHeader","useCallback","title","language","subTitle","setAnotherHeader","className","HoursStyle","Days","days","map","d","i","key","Math","random","Day","header","anotherHeader","onChangeHour","e","arg","a","split","hour","target","value","time","day","curHours","onClickAvailable","id","start","end","showError","render","setRender","Fragment","isAvailable","length","DayContent","onChange","disabled","defaultValue","OpeningHours","Error","Body","DaysContent","Button","color","onClick"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,aAAe,oCAAoC,KAAO,4BAA4B,KAAO,4BAA4B,KAAO,4BAA4B,IAAM,2BAA2B,YAAc,mCAAmC,WAAa,kCAAkC,OAAS,8BAA8B,MAAQ,6BAA6B,aAAa,kCAAkC,gBAAgB,uC,qJCgJ3aC,uBAZS,SAACC,GAAD,MAAiB,CACrCC,SAAUC,YAAYF,GACtBG,MAAOC,YAASJ,OAKO,SAACK,GAAD,MAAoB,CAE3CC,kBAAmB,SAACC,GAAD,OAAeF,EAASG,YAAqBD,QAGrDR,EA3HuB,SAACU,GAAW,IAAD,EACrBC,oBAAkB,GADG,mBACtCC,EADsC,KAChCC,EADgC,OAEnBF,mBAAc,CACpC,EAAK,GACL,EAAK,GACL,EAAK,GACL,EAAK,GACL,EAAK,GACL,EAAK,GACL,EAAK,KAToC,mBAEtCG,EAFsC,KAE/BC,EAF+B,KAW7CC,qBAAU,WACNN,EAAMR,UAAYa,EAAS,2BAAKD,GAAUJ,EAAMR,WAChDW,GAAQ,GACRI,MACD,IACH,IAAMA,EAAYC,uBAAY,kBACzB,6BACG,kBAAC,IAAD,CAAgBC,MAAOC,IAA0B,GAAIC,SAAUD,IAA6B,KAC5F,kBAAC,IAAD,CAAaD,MAAOC,IAA0B,QAIhD,IACAE,EAAmBJ,uBAAY,kBAEhC,yBAAKK,UAAWC,IAAWC,MACvBC,IAAiBC,KAAI,SAACC,EAAWC,GAAZ,OAClB,uBAAGC,IAAKC,KAAKC,SAAUT,UAAWC,IAAWS,KAAOL,SAI1D,IACAM,EAASvB,mBAAsBM,KAjCQ,EAkCrBN,mBAAsBW,KAAvCa,EAlCsC,oBAoCvCC,EAAe,SAACC,EAAwCC,GAC1D,IAAMC,EAAID,EAAIE,MAAM,KACdC,EAAOJ,EAAEK,OAAOC,MAChBC,EAAe,OAARL,EAAE,GAAc,MAAQ,QAC/BM,GAAON,EAAE,GAETO,EAA6ChC,EAAM+B,GACzDC,EAAS,GAAGF,GAAQH,EAEpB1B,EAAS,2BACFD,GADC,kBACO+B,EAAMC,MAInBC,EAAmB,SAACJ,EAAgBK,GACtCjC,EAAS4B,EAAK,2BACP7B,GADO,kBACCkC,EAAK,CAAC,CAAEC,MAAO,QAASC,IAAK,YAD9B,2BAGHpC,GAHG,kBAGKkC,EAAK,OAQtBG,EAA4B,KAAhBzC,EAAMN,OAAgC,OAAhBM,EAAMN,MAAiBM,EAAMN,MAAQ,KA9DhC,EA+DjBO,mBAAsB,0CA/DL,mBA+DtCyC,EA/DsC,KA+D9BC,EA/D8B,KA0F7C,OA1BArC,qBAAU,WAENqC,EAAUzC,EAAO,kBAAC,IAAM0C,SAAP,KAEZ5B,IAAiBC,KAAI,SAACC,EAAWC,GAE9B,IAAM0B,EAAczC,EAAMe,GAAG2B,OAAS,EACtC,OACI,yBAAK1B,IAAKC,KAAKC,SAAUT,UAAWC,IAAWiC,YAC3C,uBAAGlC,UAAWC,IAAWS,KAAOL,GAEhC,kBAAC,IAAD,CAAcE,IAAKC,KAAKC,SAAU/B,MAAOsD,EAAaG,SAAUX,EAAkBC,GAAInB,IAEtF,kBAAC,IAAD,CAASC,IAAKD,EAAG8B,UAAWJ,EAAapC,MAAOC,IAAc,GAC1DwC,aAAc,QAASF,SAAUtB,EAAcY,GAAInB,EAAI,SAAUc,MAAOY,EAAczC,EAAMe,GAAG,GAAGoB,MAAQ,KAE9G,kBAAC,IAAD,CAASnB,IAAKC,KAAKC,SAAU2B,UAAWJ,EAAapC,MAAOC,IAAe,GACvEwC,aAAc,QAASF,SAAUtB,EAAcY,GAAInB,EAAI,OAAQc,MAAOY,EAAczC,EAAMe,GAAG,GAAGqB,IAAM,UAKtG,4CAErB,CAACpC,IAGA,yBAAKS,UAAWC,IAAWqC,cACtB3B,EACAiB,GAAa,uBAAG5B,UAAWC,IAAWsC,OAAQX,GAC/C,yBAAK5B,UAAWC,IAAWuC,MACtB5B,EACD,6BACA,yBAAKZ,UAAWC,IAAWwC,aACtBZ,IAIT,yBAAK7B,UAAWC,IAAWyC,QACvB,kBAAC,IAAD,CAAQC,MAAM,SAASP,UAAU,EAAMQ,QA9ChC,WACfzD,EAAMH,kBAAkBO,KA6C6CM,KAAoB,GAAG,kBAAC,IAAD","file":"static/js/10.c1606d6b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"OpeningHours\":\"opening-hours_OpeningHours__1CPI0\",\"fade\":\"opening-hours_fade__1TL48\",\"Body\":\"opening-hours_Body__K0S62\",\"Days\":\"opening-hours_Days__1-y2d\",\"Day\":\"opening-hours_Day__2QHuK\",\"DaysContent\":\"opening-hours_DaysContent__2e_dG\",\"DayContent\":\"opening-hours_DayContent__2tCx_\",\"Button\":\"opening-hours_Button__jqUce\",\"error\":\"opening-hours_error__1NojJ\",\"fade-right\":\"opening-hours_fade-right__1uqCE\",\"border-bottom\":\"opening-hours_border-bottom__weMPv\"};","import React, { useState, useEffect, useCallback } from 'react';\nimport { connect } from \"react-redux\";\nimport HoursStyle from './opening-hours.module.scss';\nimport * as days from '../../../../assets';\nimport { Day } from '../../../../models/system/day';\nimport { ArrowNext } from '../../../../assets';\nimport { Button, SwitchButton, SettingsHeader, Options, Breadcrumbs } from '../../../../models/ui';\nimport { postEmployeeSchedule } from \"../../../../store\"\nimport { getSchedule, getError } from \"../../../../store/selectors\";\nimport * as language from '../../../../assets/language/language';\n\ninterface StateProps {\n    error: string\n    schedule: any\n}\n\ninterface DispatchProps {\n    postEmployeeHours: typeof postEmployeeSchedule;\n}\ntype Props = DispatchProps & StateProps;\n\n\nconst OpeningHours: React.FC<Props> = (props) => {\n    const [Flag, setFlag] = useState<boolean>(false);\n    const [Hours, setHours] = useState<Day>({\n        \"0\": [],\n        \"1\": [],\n        \"2\": [],\n        \"3\": [],\n        \"4\": [],\n        \"5\": [],\n        \"6\": []\n    })\n    useEffect(() => {\n        props.schedule && setHours({ ...Hours, ...props.schedule })\n        setFlag(true)\n        setHeader()\n    }, []);\n    const setHeader = useCallback(() =>\n        (<div>\n            <SettingsHeader title={language.hoursHeaderTitle[1]} subTitle={language.hoursHeaderSubTitle[1]} />\n            <Breadcrumbs title={language.hoursHeaderTitle[1]} />\n\n        </div>\n        )\n        , []);\n    const setAnotherHeader = useCallback(() =>\n\n        (<div className={HoursStyle.Days}>\n            {days.FullHebDays.map((d: string, i: number) =>\n                <p key={Math.random()} className={HoursStyle.Day} >{d}</p>\n            )}\n        </div>\n        )\n        , []);\n    const header = useState<JSX.Element>(setHeader());\n    const [anotherHeader] = useState<JSX.Element>(setAnotherHeader());\n\n    const onChangeHour = (e: React.ChangeEvent<HTMLInputElement>, arg: string) => {\n        const a = arg.split(',');\n        const hour = e.target.value;\n        const time = a[1] == \"end\" ? 'end' : 'start';\n        const day = +a[0];\n\n        const curHours: { start: string, end: string }[] = Hours[day];\n        curHours[0][time] = hour;\n\n        setHours({\n            ...Hours, [day]: curHours\n        });\n    }\n\n    const onClickAvailable = (value: boolean, id: number) => {\n        setHours(value ? {\n            ...Hours, [id]: [{ start: \"08:00\", end: \"20:00\" }]\n        } : {\n                ...Hours, [id]: []\n            });\n    }\n    const saveChange = () => {\n        props.postEmployeeHours(Hours)\n    }\n\n\n    const showError = props.error !== \"\" && props.error !== null ? props.error : null;\n    const [render, setRender] = useState<JSX.Element>(<p>loading...</p>)\n    useEffect(() => {\n\n        setRender(Flag ? <React.Fragment>\n\n            {days.FullHebDays.map((d: string, i: number) => {\n\n                const isAvailable = Hours[i].length > 0;\n                return (\n                    <div key={Math.random()} className={HoursStyle.DayContent}>\n                        <p className={HoursStyle.Day} >{d}</p>\n\n                        <SwitchButton key={Math.random()} state={isAvailable} onChange={onClickAvailable} id={i} />\n\n                        <Options key={i} disabled={!isAvailable} title={language.open[1]}\n                            defaultValue={'08:00'} onChange={onChangeHour} id={i + \",start\"} value={isAvailable ? Hours[i][0].start : \"\"}\n                        />\n                        <Options key={Math.random()} disabled={!isAvailable} title={language.close[1]}\n                            defaultValue={'24:00'} onChange={onChangeHour} id={i + \",end\"} value={isAvailable ? Hours[i][0].end : \"\"}\n                        />\n                    </div>\n                )\n            })}\n        </React.Fragment> : <p>loading...</p>)\n\n    }, [Hours]);\n\n    return (\n        <div className={HoursStyle.OpeningHours}>\n            {header}\n            {showError && <p className={HoursStyle.Error}>{showError}</p>}\n            <div className={HoursStyle.Body}>\n                {anotherHeader}\n                <hr />\n                <div className={HoursStyle.DaysContent}>\n                    {render}\n                </div>\n            </div>\n\n            <div className={HoursStyle.Button}>\n                <Button color=\"purple\" disabled={true} onClick={saveChange}>{language.saveChange[1]}<ArrowNext /></Button>\n                {/* <Button color=\"orange\" disabled={true} onClick={() => setHours({ ...Hours, ...props.details.schedule })}>{\".cancel[1]\"}<ArrowNext /></Button> */}\n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = (state: any) => ({\n    schedule: getSchedule(state),\n    error: getError(state),\n\n});\n\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    // getDetails: () => dispatch(getDetails()),\n    postEmployeeHours: (form: Day) => dispatch(postEmployeeSchedule(form)),\n});\n\nexport default connect<StateProps, DispatchProps>(mapStateToProps, mapDispatchToProps)(OpeningHours);\n"],"sourceRoot":""}