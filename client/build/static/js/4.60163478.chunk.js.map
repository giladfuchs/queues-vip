{"version":3,"sources":["containers/business/calendar/calendar.module.scss","containers/business/calendar/components/add-new-queue/add-new-queue.module.scss","containers/business/calendar/components/helper.ts","containers/business/calendar/components/add-new-queue/add-new-queue.calendar.tsx","containers/business/calendar/calendar.business.tsx"],"names":["module","exports","hebDays","NewQueue","props","useState","day","plainText","value","moment","date","format","editable","label","start","hour","end","add","duration","price","Form","setForm","error","setError","footer","style","display","color","disabled","onClick","addNewEvent","close","className","NewQueueStyle","title","form","connect","state","services","getServices","person","getPerson","days","getDays","mat","getMat","startMinTime","getStartMinTime","loading","getLoading","timeDistance","getTimeDistance","durationOfNewQueue","getDurationOfNewQueue","getPrice","dispatch","updateScheduleWeek","queue","headerDays","setHeaderDays","useEffect","setAllDaysWeek","OpenModal","setOpenModal","Time","setTime","allDaysWeek","slots","setSlots","time","map","element","minutes","every","e","key","CalendarStyle","Hours","cursor","index","Slot","onSlotClick","Event","week","d","curMonth","useCallback","month","helper","Date","i","toString","Fragment","event","serviceId","_id","clientId","Calendar","Header","Content","TableHeader"],"mappings":"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","file":"static/js/4.60163478.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Calendar\":\"calendar_Calendar__2cL5o\",\"Header\":\"calendar_Header__1lHmd\",\"Content\":\"calendar_Content__3Mu4e\",\"TableHeader\":\"calendar_TableHeader__1Suok\",\"Hours\":\"calendar_Hours__2w-Di\",\"Slot\":\"calendar_Slot__1pRln\",\"Event\":\"calendar_Event__1G8af\",\"NoWork\":\"calendar_NoWork__2R4ba\",\"error\":\"calendar_error__36zqy\",\"fade\":\"calendar_fade__3xsbL\",\"fade-right\":\"calendar_fade-right__2ST3I\",\"border-bottom\":\"calendar_border-bottom__3jBST\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NewQueue\":\"add-new-queue_NewQueue__SJ18V\",\"error\":\"add-new-queue_error__3nZ_c\",\"fade\":\"add-new-queue_fade__Xtr_6\",\"fade-right\":\"add-new-queue_fade-right__2Mwgl\",\"border-bottom\":\"add-new-queue_border-bottom__2EAqO\"};","import moment from \"moment\";\n\nexport const dateformat = \"yyyy/MM/DD\";\nexport const eventFormat = \"YYYY-MM-DD HH:mm\";\nexport const hebDays = [\"א'\", \"ב'\", \"ג'\", \"ד'\", \"ה'\", \"ו'\", \"ש'\"];\n\n// Get week number and return all the days of week\nexport const getWeekDaysByWeekNumber = (weeknumber?: number, sch?: any) => {\n  const week = Object.keys(sch)\n    .filter((s) => sch[s].length > 0)\n    .map((a) => +a);\n  // : [0];\n\n  var date = moment()\n      .isoWeek(weeknumber || 1)\n      .startOf(\"week\"),\n    days = [];\n  date.add(week[0], \"day\");\n\n  let add = 0;\n  for (let i = 0; i < week.length; i++) {\n    add = i !== 0 ? week[i] - week[i - 1] : 0;\n    date.add(add, \"day\");\n\n    days.push(date.format(dateformat));\n  }\n  return days;\n};\n\nexport const monthHebToEng = (month: string) => {\n  switch (month) {\n    case \"ינואר\":\n      return \"January\";\n    case \"פבואר\":\n      return \"February\";\n    case \"מרץ\":\n      return \"March\";\n    case \"אפריל\":\n      return \"May\";\n    case \"מאי\":\n      return \"May\";\n    case \"יוני\":\n      return \"June\";\n    case \"יולי\":\n      return \"July\";\n    case \"אוגוסט\":\n      return \"August\";\n    case \"ספטמבר\":\n      return \"September\";\n    case \"אוקטובר\":\n      return \"October\";\n    case \"נובמבר\":\n      return \"November\";\n    case \"דצמבר\":\n      return \"December\";\n  }\n};\n\nexport const monthNumberToHeb = (month: number): string => {\n  switch (month) {\n    case 1:\n      return \"ינואר\";\n    case 2:\n      return \"פבואר\";\n    case 3:\n      return \"מרץ\";\n    case 4:\n      return \"אפריל\";\n    case 5:\n      return \"מאי\";\n    case 6:\n      return \"יוני\";\n    case 7:\n      return \"יולי\";\n    case 8:\n      return \"אוגוסט\";\n    case 9:\n      return \"ספטמבר\";\n    case 10:\n      return \"אוקטובר\";\n    case 11:\n      return \"נובמבר\";\n    default:\n      return \"דצמבר\";\n  }\n};\n","import React, { useState } from 'react';\nimport moment from 'moment';\nimport NewQueueStyle from './add-new-queue.module.scss';\nimport { Modal, Button, Inputs } from '../../../../../models/ui';\nimport { plainText } from '../../../../../models/ui/input/utility/input-types.input';\n\ninterface OwnProps {\n    close: () => void;\n    addNewEvent: () => void;\n    date: { date: string, hour: string },\n    duration: number,\n    price: number,\n}\n\nconst NewQueue: React.FC<OwnProps> = (props) => {\n    const [Form, setForm] = useState<any>({\n        day: { ...plainText, value: moment(props.date.date, \"yyyy/MM/DD\").format(\"DD/MM/yyyy\"), editable: false, label: \"תאריך\" },\n        start: {\n            ...plainText, value: props.date.hour, editable: false, label: \"שעת התחלה\"\n        },\n        end: {\n            ...plainText, value: moment(props.date.hour, \"HH:mm\").add(props.duration, 'm').format(\"HH:mm\"), editable: false, label: \"שעת סיום\"\n        },\n        price: {\n            ...plainText, value: props.price, editable: false, label: \"מחיר\"\n        },\n    });\n    const [error, setError] = useState<string>(\"\");\n\n\n\n\n    const updateDetails = () => {\n        props.addNewEvent();\n        props.close();\n    }\n\n\n\n    const footer = (\n        <div style={{ display: 'flex' }}>\n            <Button color=\"purple\" disabled={true} onClick={() => updateDetails()}>שמור</Button>\n            <Button color=\"purple\" disabled={true} onClick={() => props.close()}>בטל</Button>\n        </div>\n\n    )\n    return (\n        <div className={NewQueueStyle.NewQueue}>\n            <Modal title=\"קביעת תור\" close={props.close} footer={footer} >\n\n                <Inputs\n                    form={Form} setForm={setForm} error={error} setError={setError}\n                />\n            </Modal>\n        </div>\n    )\n}\n\n\nexport default NewQueue;","import React, { useState, useEffect, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport CalendarStyle from './calendar.module.scss';\n\nimport { getDurationOfNewQueue, getPrice, getServices, getMat, getDays, getStartMinTime, getTimeDistance, getPerson, getLoading } from '../../../store/selectors';\nimport { updateScheduleWeek } from '../../../store';\n\nimport * as helper from './components/helper';\nimport NewQueue from './components/add-new-queue/add-new-queue.calendar';\n\nimport { Client, Service, Queue } from '../../../models/system';\n\n\n\ninterface StateProps {\n    services: Service[],\n    person: Client,\n    days: [],\n    mat: boolean[][],\n    startMinTime: number,\n    loading: boolean,\n    timeDistance: number,\n    durationOfNewQueue: number,\n    price: number,\n}\n\ninterface DispatchProps {\n    updateScheduleWeek: typeof updateScheduleWeek;\n}\n\ntype Props = DispatchProps & StateProps;\nconst CalendarUser: React.FC<Props> = (props) => {\n    const [headerDays, setHeaderDays] = useState<JSX.Element[]>();\n\n    useEffect(() => {\n\n        setHeaderDays(days())\n        setAllDaysWeek(props.days)\n    }, [props.mat])\n\n\n\n    const [OpenModal, setOpenModal] = useState<boolean>(false)\n    const [Time, setTime] = useState<{ date: string, hour: string }>({ date: \"\", hour: \"\" });\n\n\n\n\n\n\n\n    const [allDaysWeek, setAllDaysWeek] = useState<string[]>(props.days)\n    const [slots, setSlots] = useState<any>(null)\n\n    // Hold the table\n    useEffect(() => {\n\n        let time: number = 0;\n        setSlots(\n            props.mat.map(element => {\n                const hour = moment(props.startMinTime, \"HH:mm\").minutes(time).format(\"HH:mm\");\n                time += props.timeDistance;\n                return element.every(e => !e) ? null :\n                    (\n                        <tr key={hour}>\n                            <td className={CalendarStyle.Hours} style={{ cursor: 'initial' }}>{hour}</td>\n                            {\n                                element.map((day: boolean, index: number) => {\n                                    if (!day) {\n                                        return (\n                                            <td key={hour + ',' + props.days[index]} className={CalendarStyle.Slot + \" \" + CalendarStyle.Event}\n                                                style={{ cursor: \"not-allowed\" }}>\n                                            </td>\n                                        );\n                                    }\n                                    return (\n                                        <td key={hour + ',' + props.days[index]} className={CalendarStyle.Slot} onClick={() => onSlotClick(hour, props.days[index])}></td>\n                                    );\n                                })\n                            }\n                        </tr>\n                    );\n            })\n        )\n    }, [props.mat, props.startMinTime]);\n\n    ;\n\n    const addNewEvent = () => {\n\n        const event: Queue = {\n            serviceId: props.services[0]._id || \"\",\n            clientId: props.person._id || \"\",\n            day: Time.date,\n            hour: Time.hour,\n            duration: props.durationOfNewQueue\n        }\n        props.updateScheduleWeek(event)\n    }\n\n    const onSlotClick = (hour: string, date: string) => {\n        setOpenModal(true);\n        setTime({ date, hour });\n    }\n\n    const week = props.days.map(d => moment(d).day())\n\n    // Return days and dats(The first row of table)\n    const curMonth = useCallback(() => (\n        helper.monthNumberToHeb(moment(new Date()).month() + 1)\n    ), []);\n    const days = useCallback(() => (\n        allDaysWeek.map((day: string, i: number) => {\n            return (\n                <th key={day}>\n                    {helper.hebDays[week[i]]}\n                    <br />\n                    {moment(day.toString(), \"yyyy/MM/DD\").format('DD/MM')}\n                </th>\n            );\n        })\n    ), []);\n\n    return props.loading ? <p>loading ....</p>\n        : (\n            <React.Fragment>\n                {OpenModal && <NewQueue date={Time} close={() => setOpenModal(false)}\n                    addNewEvent={addNewEvent} duration={props.durationOfNewQueue} price={props.price} />}\n                <div className={CalendarStyle.Calendar}>\n                    <div className={CalendarStyle.Header}>\n                        {/* <Button color='orange' disabled={true} onClick={() => props.updateWeekNumber(props.weekNumber - 1)}>שבוע קודם</Button>\n                    <Button color='purple' disabled={true} onClick={() => props.updateWeekNumber(parseInt(moment(new Date()).format('WW')))}>שבוע נוכחי</Button>\n                    <Button color='orange' disabled={true} onClick={() => props.updateWeekNumber(props.weekNumber + 1)}>שבוע הבא</Button> */}\n\n                    </div>\n                    <div className={CalendarStyle.Content}>\n                        <table >\n                            <tbody>\n                                <tr>\n                                    <th className={CalendarStyle.TableHeader}>\n                                        {curMonth()}\n                                    </th>\n                                    {headerDays}\n                                </tr>\n                                {slots}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n}\n\nconst mapStateToProps = (state: any) => ({\n    services: getServices(state),\n    person: getPerson(state),\n    days: getDays(state),\n    mat: getMat(state),\n\n    startMinTime: getStartMinTime(state),\n    loading: getLoading(state),\n    timeDistance: getTimeDistance(state),\n    durationOfNewQueue: getDurationOfNewQueue(state),\n    price: getPrice(state),\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    updateScheduleWeek: (queue: Queue) => dispatch(updateScheduleWeek(queue)),\n});\n\nexport default connect<StateProps, DispatchProps>(mapStateToProps, mapDispatchToProps)(CalendarUser);"],"sourceRoot":""}